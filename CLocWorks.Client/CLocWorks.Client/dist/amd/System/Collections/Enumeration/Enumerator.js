/*!
 * @author electricessence / https://github.com/electricessence/
 * Licensing: MIT https://github.com/electricessence/TypeScript.NET/blob/master/LICENSE.md
 */
define(["require","exports","../../Disposable/dispose","../../Types","./ArrayEnumerator","./IndexEnumerator","./UnsupportedEnumerableException","./InfiniteEnumerator","./EmptyEnumerator","./IteratorEnumerator"],function(r,e,n,t,i,u,o,a,s,f){"use strict";function p(r){if(r)throw new o.UnsupportedEnumerableException(w)}function m(r,e){if(void 0===e&&(e=1/0),Array.isArray(r)||t.Type.isString(r)){var n=Math.min(r.length,e);if(isFinite(n)){if(n>65535)return new Array(n);var i=[];return i.length=n,i}}return[]}function y(r){if(!r)return s.EmptyEnumerator;if(Array.isArray(r))return new i.ArrayEnumerator(r);if(t.Type.isArrayLike(r))return new u.IndexEnumerator(function(){return{source:r,length:r.length,pointer:0,step:1}});if(!t.Type.isPrimitive(r)){if(E(r))return r.getEnumerator();if(t.Type.isFunction(r))return new a.InfiniteEnumerator(r);if(d(r))return new f.IteratorEnumerator(r)}throw new o.UnsupportedEnumerableException}function E(r){return t.Type.hasMemberOfType(r,"getEnumerator",t.Type.FUNCTION)}function c(r){return t.Type.isArrayLike(r)||E(r)}function l(r){return t.Type.hasMemberOfType(r,"moveNext",t.Type.FUNCTION)}function d(r){return t.Type.hasMemberOfType(r,"next",t.Type.FUNCTION)}function h(r,e,i){if(void 0===i&&(i=1/0),r===A)return 0;if(r&&i>0){if(t.Type.isArrayLike(r)){p(!isFinite(i)&&!isFinite(r.length));for(var u=0;u<Math.min(r.length,i)&&e(r[u],u)!==!1;u++);return u}if(l(r)){p(!isFinite(i)&&r.isEndless);for(var u=0;i>u&&r.moveNext()&&e(r.current,u++)!==!1;);return u}if(E(r))return p(!isFinite(i)&&r.isEndless),n.using(r.getEnumerator(),function(r){return h(r,e,i)});if(d(r)){p(!isFinite(i));for(var u=0,o=void 0;i>u&&!(o=r.next()).done&&e(o.value,u++)!==!1;);return u}}return-1}function T(r,e){if(void 0===e&&(e=1/0),r===A)return[];if(!isFinite(e)&&Array.isArray(r))return r.slice();var n=m(r,e);if(-1===h(r,function(r,e){n[e]=r},e))throw new o.UnsupportedEnumerableException;return n}function v(r,e,n){if(void 0===n&&(n=1/0),r===A)return[];if(!isFinite(n)&&Array.isArray(r))return r.map(e);var t=m(r,n);if(-1===h(r,function(r,n){t[n]=e(r)},n))throw new o.UnsupportedEnumerableException;return t}var A="",w="Cannot call forEach on an endless enumerable. Would result in an infinite loop that could hang the current process.";e.throwIfEndless=p,e.from=y,e.isEnumerable=E,e.isEnumerableOrArrayLike=c,e.isEnumerator=l,e.isIterator=d,e.forEach=h,e.toArray=T,e.map=v});
//# sourceMappingURL=Enumerator.js.map
