/*!
 * @author electricessence / https://github.com/electricessence/
 * Licensing: MIT https://github.com/electricessence/TypeScript.NET/blob/master/LICENSE.md
 */
!function(e){if("object"==typeof module&&"object"==typeof module.exports){var r=e(require,exports);void 0!==r&&(module.exports=r)}else"function"==typeof define&&define.amd&&define(["require","exports","../../Disposable/dispose","../../Types","./ArrayEnumerator","./IndexEnumerator","./UnsupportedEnumerableException","./InfiniteEnumerator","./EmptyEnumerator","./IteratorEnumerator"],e)}(function(e,r){"use strict";function n(e){if(e)throw new d.UnsupportedEnumerableException(A)}function t(e,r){if(void 0===r&&(r=1/0),Array.isArray(e)||y.Type.isString(e)){var n=Math.min(e.length,r);if(isFinite(n)){if(n>65535)return new Array(n);var t=[];return t.length=n,t}}return[]}function i(e){if(!e)return T.EmptyEnumerator;if(Array.isArray(e))return new c.ArrayEnumerator(e);if(y.Type.isArrayLike(e))return new l.IndexEnumerator(function(){return{source:e,length:e.length,pointer:0,step:1}});if(!y.Type.isPrimitive(e)){if(o(e))return e.getEnumerator();if(y.Type.isFunction(e))return new h.InfiniteEnumerator(e);if(s(e))return new v.IteratorEnumerator(e)}throw new d.UnsupportedEnumerableException}function o(e){return y.Type.hasMemberOfType(e,"getEnumerator",y.Type.FUNCTION)}function u(e){return y.Type.isArrayLike(e)||o(e)}function a(e){return y.Type.hasMemberOfType(e,"moveNext",y.Type.FUNCTION)}function s(e){return y.Type.hasMemberOfType(e,"next",y.Type.FUNCTION)}function f(e,r,t){if(void 0===t&&(t=1/0),e===x)return 0;if(e&&t>0){if(y.Type.isArrayLike(e)){n(!isFinite(t)&&!isFinite(e.length));for(var i=0;i<Math.min(e.length,t)&&r(e[i],i)!==!1;i++);return i}if(a(e)){n(!isFinite(t)&&e.isEndless);for(var i=0;t>i&&e.moveNext()&&r(e.current,i++)!==!1;);return i}if(o(e))return n(!isFinite(t)&&e.isEndless),E.using(e.getEnumerator(),function(e){return f(e,r,t)});if(s(e)){n(!isFinite(t));for(var i=0,u=void 0;t>i&&!(u=e.next()).done&&r(u.value,i++)!==!1;);return i}}return-1}function p(e,r){if(void 0===r&&(r=1/0),e===x)return[];if(!isFinite(r)&&Array.isArray(e))return e.slice();var n=t(e,r);if(-1===f(e,function(e,r){n[r]=e},r))throw new d.UnsupportedEnumerableException;return n}function m(e,r,n){if(void 0===n&&(n=1/0),e===x)return[];if(!isFinite(n)&&Array.isArray(e))return e.map(r);var i=t(e,n);if(-1===f(e,function(e,n){i[n]=r(e)},n))throw new d.UnsupportedEnumerableException;return i}var E=e("../../Disposable/dispose"),y=e("../../Types"),c=e("./ArrayEnumerator"),l=e("./IndexEnumerator"),d=e("./UnsupportedEnumerableException"),h=e("./InfiniteEnumerator"),T=e("./EmptyEnumerator"),v=e("./IteratorEnumerator"),x="",A="Cannot call forEach on an endless enumerable. Would result in an infinite loop that could hang the current process.";r.throwIfEndless=n,r.from=i,r.isEnumerable=o,r.isEnumerableOrArrayLike=u,r.isEnumerator=a,r.isIterator=s,r.forEach=f,r.toArray=p,r.map=m});
//# sourceMappingURL=Enumerator.js.map
